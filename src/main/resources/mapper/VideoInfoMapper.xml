<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.video.dao.VideoInfoDao" >

  <resultMap id="Info" type="VideoInfo" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="video_name" property="videoName" jdbcType="VARCHAR" />
    <result column="video_url" property="videoUrl" jdbcType="VARCHAR" />
    <result column="video_type_id" property="videoTypeId" jdbcType="INTEGER" />
    <association property="videoType" javaType="VideoType">
      <result column="type_name" property="typeName"></result>
    </association>
  </resultMap>

  <select id="ListAllInfoAndType" resultMap="Info">
    select i.id, video_name, video_url, video_type_id,type_name
    from video_info i
           inner join video_type t
                      on i.video_type_id=t.id;
  </select>

  <select id="getVideoTypeById" resultType="videoInfo">
    select * from video_info where id = #{id};
  </select>

  <insert id="saveVideoInfo" parameterType="videoInfo">
    insert into video_info(video_name, video_url, video_type_id) value (#{videoName},#{videoUrl},#{videoTypeId});
  </insert>

  <delete id="deleteVideoInfo" parameterType="integer">
    delete from video_info where id = #{id}
  </delete>

</mapper>